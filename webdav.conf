DavLockDB "/var/lib/dav/DavLock"

# Disable TRACE method server-wide (information disclosure risk)
TraceEnable Off

Alias / "/var/lib/dav/data/"

# Root directory — deny all by default.
# Per-folder blocks generated at startup (webdav-folders.conf) override this.
<Directory "/var/lib/dav/data/">
  Dav On
  Options +Indexes
  DirectoryIndex disabled

  # Use UTF-8 every time
  IndexOptions Charset=UTF-8

  ### Table configuration
  IndexOptions FancyIndexing
  IndexOptions HTMLTable
  IndexOptions SuppressDescription
  IndexOptions SuppressRules
  IndexOptions NameWidth=*

  ### Sorting options
  IndexOrderDefault Ascending Name
  IndexOptions IgnoreCase
  IndexOptions FoldersFirst
  IndexOptions VersionSort

  Require all denied
</Directory>

# Per-folder access config — generated by docker-entrypoint.sh at container startup
Include conf/webdav-folders.conf

# These disable redirects on non-GET requests for directories that
# don't include the trailing slash (for misbehaving clients).
BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-carefully
BrowserMatch "MS FrontPage" redirect-carefully
BrowserMatch "^WebDrive" redirect-carefully
BrowserMatch "^WebDAVFS/1.[01234]" redirect-carefully
BrowserMatch "^gnome-vfs/1.0" redirect-carefully
BrowserMatch "^XML Spy" redirect-carefully
BrowserMatch "^Dreamweaver-WebDAV-SCM1" redirect-carefully
BrowserMatch " Konqueror/4" redirect-carefully
BrowserMatch "^gvfs" redirect-carefully
