name: Security Tests

on:
  pull_request:

concurrency:
  group: security-tests-${{ github.head_ref }}
  cancel-in-progress: true

jobs:
  security-tests:
    name: "Security Tests"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6
      - name: Build image
        run: docker build -t webdav-test .
      - name: "Basic Auth â€” public + private"
        run: ./tests/scenario-1-basic-auth.sh --no-build
      - name: "Read-only folders"
        run: ./tests/scenario-2-readonly.sh --no-build
      - name: "Per-user folder isolation"
        run: ./tests/scenario-3-user-isolation.sh --no-build
      - name: "Public server (no auth)"
        run: ./tests/scenario-4-public-only.sh --no-build
      - name: "LDAP authentication"
        run: ./tests/scenario-5-ldap.sh --no-build
